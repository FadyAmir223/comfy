var Cr=Object.create;var ye=Object.defineProperty;var Or=Object.getOwnPropertyDescriptor;var Rr=Object.getOwnPropertyNames;var Nr=Object.getPrototypeOf,Lr=Object.prototype.hasOwnProperty;var Ur=(e,r)=>()=>(e&&(r=e(e=0)),r);var b=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ir=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Rr(r))!Lr.call(e,o)&&o!==t&&ye(e,o,{get:()=>r[o],enumerable:!(n=Or(r,o))||n.enumerable});return e};var h=(e,r,t)=>(t=e!=null?Cr(Nr(e)):{},Ir(r||!e||!e.__esModule?ye(t,"default",{value:e,enumerable:!0}):t,e));var Fr,l,s=Ur(()=>{Fr=()=>typeof document>"u"?new URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href,l=Fr()});var Ae=b((re,xe)=>{s();var V=require("buffer"),E=V.Buffer;function ke(e,r){for(var t in e)r[t]=e[t]}E.from&&E.alloc&&E.allocUnsafe&&E.allocUnsafeSlow?xe.exports=V:(ke(V,re),re.Buffer=A);function A(e,r,t){return E(e,r,t)}ke(E,A);A.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return E(e,r,t)};A.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=E(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};A.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return E(e)};A.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return V.SlowBuffer(e)}});var Oe=b((cn,te)=>{"use strict";s();var jr=Ae().Buffer;te.exports=Br;te.exports.parse=Ce;var Pr=/^ *(?:[Bb][Aa][Ss][Ii][Cc]) +([A-Za-z0-9._~+/-]+=*) *$/,Dr=/^([^:]*):(.*)$/;function Br(e){if(!e)throw new TypeError("argument req is required");if(typeof e!="object")throw new TypeError("argument req is required to be an object");var r=Hr(e);return Ce(r)}function qr(e){return jr.from(e,"base64").toString()}function Hr(e){if(!e.headers||typeof e.headers!="object")throw new TypeError("argument req is required to have headers property");return e.headers.authorization}function Ce(e){if(typeof e=="string"){var r=Pr.exec(e);if(r){var t=Dr.exec(qr(r[1]));if(t)return new Mr(t[1],t[2])}}}function Mr(e,r){this.name=e,this.pass=r}});var Ne=b((pn,Re)=>{s();var U=1e3,I=U*60,F=I*60,j=F*24,$r=j*365.25;Re.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Vr(e);if(t==="number"&&isNaN(e)===!1)return r.long?Jr(e):Gr(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Vr(e){if(e=String(e),!(e.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*$r;case"days":case"day":case"d":return t*j;case"hours":case"hour":case"hrs":case"hr":case"h":return t*F;case"minutes":case"minute":case"mins":case"min":case"m":return t*I;case"seconds":case"second":case"secs":case"sec":case"s":return t*U;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Gr(e){return e>=j?Math.round(e/j)+"d":e>=F?Math.round(e/F)+"h":e>=I?Math.round(e/I)+"m":e>=U?Math.round(e/U)+"s":e+"ms"}function Jr(e){return G(e,j,"day")||G(e,F,"hour")||G(e,I,"minute")||G(e,U,"second")||e+" ms"}function G(e,r,t){if(!(e<r))return e<r*1.5?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}});var ae=b((f,Le)=>{s();f=Le.exports=oe.debug=oe.default=oe;f.coerce=Zr;f.disable=Wr;f.enable=Yr;f.enabled=Kr;f.humanize=Ne();f.names=[];f.skips=[];f.formatters={};var ne;function zr(e){var r=0,t;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return f.colors[Math.abs(r)%f.colors.length]}function oe(e){function r(){if(r.enabled){var t=r,n=+new Date,o=n-(ne||n);t.diff=o,t.prev=ne,t.curr=n,ne=n;for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];a[0]=f.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(m,_){if(m==="%%")return m;u++;var g=f.formatters[_];if(typeof g=="function"){var p=a[u];m=g.call(t,p),a.splice(u,1),u--}return m}),f.formatArgs.call(t,a);var y=r.log||f.log||console.log.bind(console);y.apply(t,a)}}return r.namespace=e,r.enabled=f.enabled(e),r.useColors=f.useColors(),r.color=zr(e),typeof f.init=="function"&&f.init(r),r}function Yr(e){f.save(e),f.names=[],f.skips=[];for(var r=(typeof e=="string"?e:"").split(/[\s,]+/),t=r.length,n=0;n<t;n++)r[n]&&(e=r[n].replace(/\*/g,".*?"),e[0]==="-"?f.skips.push(new RegExp("^"+e.substr(1)+"$")):f.names.push(new RegExp("^"+e+"$")))}function Wr(){f.enable("")}function Kr(e){var r,t;for(r=0,t=f.skips.length;r<t;r++)if(f.skips[r].test(e))return!1;for(r=0,t=f.names.length;r<t;r++)if(f.names[r].test(e))return!0;return!1}function Zr(e){return e instanceof Error?e.stack||e.message:e}});var Fe=b((v,Ie)=>{s();v=Ie.exports=ae();v.log=et;v.formatArgs=Qr;v.save=rt;v.load=Ue;v.useColors=Xr;v.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:tt();v.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function Xr(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}v.formatters.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function Qr(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+v.humanize(this.diff),!!r){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(n++,a==="%c"&&(o=n))}),e.splice(o,0,t)}}function et(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function rt(e){try{e==null?v.storage.removeItem("debug"):v.storage.debug=e}catch{}}function Ue(){var e;try{e=v.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}v.enable(Ue());function tt(){try{return window.localStorage}catch{}}});var Be=b((d,De)=>{s();var je=require("tty"),P=require("util");d=De.exports=ae();d.init=ft;d.log=st;d.formatArgs=at;d.save=it;d.load=Pe;d.useColors=ot;d.colors=[6,2,3,4,5,1];d.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,r){var t=r.substring(6).toLowerCase().replace(/_([a-z])/g,function(o,a){return a.toUpperCase()}),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});var C=parseInt(process.env.DEBUG_FD,10)||2;C!==1&&C!==2&&P.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var nt=C===1?process.stdout:C===2?process.stderr:ut(C);function ot(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:je.isatty(C)}d.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,P.inspect(e,this.inspectOpts).split(`
`).map(function(r){return r.trim()}).join(" ")};d.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,P.inspect(e,this.inspectOpts)};function at(e){var r=this.namespace,t=this.useColors;if(t){var n=this.color,o="  \x1B[3"+n+";1m"+r+" \x1B[0m";e[0]=o+e[0].split(`
`).join(`
`+o),e.push("\x1B[3"+n+"m+"+d.humanize(this.diff)+"\x1B[0m")}else e[0]=new Date().toUTCString()+" "+r+" "+e[0]}function st(){return nt.write(P.format.apply(P,arguments)+`
`)}function it(e){e==null?delete process.env.DEBUG:process.env.DEBUG=e}function Pe(){return process.env.DEBUG}function ut(e){var r,t=process.binding("tty_wrap");switch(t.guessHandleType(e)){case"TTY":r=new je.WriteStream(e),r._type="tty",r._handle&&r._handle.unref&&r._handle.unref();break;case"FILE":var n=require("fs");r=new n.SyncWriteStream(e,{autoClose:!1}),r._type="fs";break;case"PIPE":case"TCP":var o=require("net");r=new o.Socket({fd:e,readable:!1,writable:!0}),r.readable=!1,r.read=null,r._type="pipe",r._handle&&r._handle.unref&&r._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return r.fd=e,r._isStdio=!0,r}function ft(e){e.inspectOpts={};for(var r=Object.keys(d.inspectOpts),t=0;t<r.length;t++)e.inspectOpts[r[t]]=d.inspectOpts[r[t]]}d.enable(Pe())});var qe=b((vn,se)=>{s();typeof process<"u"&&process.type==="renderer"?se.exports=Fe():se.exports=Be()});var Ge=b((bn,Ve)=>{s();var ct=require("path").relative;Ve.exports=gt;var lt=process.cwd();function Me(e,r){for(var t=e.split(/[ ,]+/),n=String(r).toLowerCase(),o=0;o<t.length;o++){var a=t[o];if(a&&(a==="*"||a.toLowerCase()===n))return!0}return!1}function pt(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r),o=n.value;return n.get=function(){return o},n.writable&&(n.set=function(i){return o=i}),delete n.value,delete n.writable,Object.defineProperty(e,r,n),n}function dt(e){for(var r="",t=0;t<e;t++)r+=", arg"+t;return r.substr(2)}function mt(e){var r=this.name+": "+this.namespace;this.message&&(r+=" deprecated "+this.message);for(var t=0;t<e.length;t++)r+=`
    at `+e[t].toString();return r}function gt(e){if(!e)throw new TypeError("argument namespace is required");var r=z(),t=O(r[1]),n=t[0];function o(a){J.call(o,a)}return o._file=n,o._ignored=vt(e),o._namespace=e,o._traced=yt(e),o._warned=Object.create(null),o.function=Et,o.property=St,o}function ht(e,r){var t=typeof e.listenerCount!="function"?e.listeners(r).length:e.listenerCount(r);return t>0}function vt(e){if(process.noDeprecation)return!0;var r=process.env.NO_DEPRECATION||"";return Me(r,e)}function yt(e){if(process.traceDeprecation)return!0;var r=process.env.TRACE_DEPRECATION||"";return Me(r,e)}function J(e,r){var t=ht(process,"deprecation");if(!(!t&&this._ignored)){var n,o,a,i,u=0,y=!1,m=z(),_=this._file;for(r?(i=r,a=O(m[1]),a.name=i.name,_=a[0]):(u=2,i=O(m[u]),a=i);u<m.length;u++)if(n=O(m[u]),o=n[0],o===_)y=!0;else if(o===this._file)_=this._file;else if(y)break;var g=n?i.join(":")+"__"+n.join(":"):void 0;if(!(g!==void 0&&g in this._warned)){this._warned[g]=!0;var p=e;if(p||(p=a===i||!a.name?He(i):He(a)),t){var x=$e(this._namespace,p,m.slice(u));process.emit("deprecation",x);return}var q=process.stderr.isTTY?wt:bt,H=q.call(this,p,n,m.slice(u));process.stderr.write(H+`
`,"utf8")}}}function O(e){var r=e.getFileName()||"<anonymous>",t=e.getLineNumber(),n=e.getColumnNumber();e.isEval()&&(r=e.getEvalOrigin()+", "+r);var o=[r,t,n];return o.callSite=e,o.name=e.getFunctionName(),o}function He(e){var r=e.callSite,t=e.name;t||(t="<anonymous@"+ie(e)+">");var n=r.getThis(),o=n&&r.getTypeName();return o==="Object"&&(o=void 0),o==="Function"&&(o=n.name||o),o&&r.getMethodName()?o+"."+t:t}function bt(e,r,t){var n=new Date().toUTCString(),o=n+" "+this._namespace+" deprecated "+e;if(this._traced){for(var a=0;a<t.length;a++)o+=`
    at `+t[a].toString();return o}return r&&(o+=" at "+ie(r)),o}function wt(e,r,t){var n="\x1B[36;1m"+this._namespace+"\x1B[22;39m \x1B[33;1mdeprecated\x1B[22;39m \x1B[0m"+e+"\x1B[39m";if(this._traced){for(var o=0;o<t.length;o++)n+=`
    \x1B[36mat `+t[o].toString()+"\x1B[39m";return n}return r&&(n+=" \x1B[36m"+ie(r)+"\x1B[39m"),n}function ie(e){return ct(lt,e[0])+":"+e[1]+":"+e[2]}function z(){var e=Error.stackTraceLimit,r={},t=Error.prepareStackTrace;Error.prepareStackTrace=_t,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(r);var n=r.stack.slice(1);return Error.prepareStackTrace=t,Error.stackTraceLimit=e,n}function _t(e,r){return r}function Et(e,r){if(typeof e!="function")throw new TypeError("argument fn must be a function");var t=dt(e.length),n=z(),o=O(n[1]);o.name=e.name;var a=new Function("fn","log","deprecate","message","site",`"use strict"
return function (`+t+`) {log.call(deprecate, message, site)
return fn.apply(this, arguments)
}`)(e,J,this,r,o);return a}function St(e,r,t){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,r);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var o=this,a=z(),i=O(a[1]);i.name=r,"value"in n&&(n=pt(e,r,t));var u=n.get,y=n.set;typeof u=="function"&&(n.get=function(){return J.call(o,t,i),u.apply(this,arguments)}),typeof y=="function"&&(n.set=function(){return J.call(o,t,i),y.apply(this,arguments)}),Object.defineProperty(e,r,n)}function $e(e,r,t){var n=new Error,o;return Object.defineProperty(n,"constructor",{value:$e}),Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:r,writable:!0}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(n,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,get:function(){return o!==void 0?o:o=mt.call(this,t)},set:function(i){o=i}}),n}});var ze=b((_n,Je)=>{"use strict";s();Je.exports=Tt;function Tt(e,r){if(!Array.isArray(e))throw new TypeError("arg must be an array of [ee, events...] arrays");for(var t=[],n=0;n<e.length;n++){var o=e[n];if(!Array.isArray(o)||o.length<2)throw new TypeError("each array member must be [ee, events...]");for(var a=o[0],i=1;i<o.length;i++){var u=o[i],y=kt(u,m);a.on(u,y),t.push({ee:a,event:u,fn:y})}}function m(){_(),r.apply(null,arguments)}function _(){for(var p,x=0;x<t.length;x++)p=t[x],p.ee.removeListener(p.event,p.fn)}function g(p){r=p}return g.cancel=_,g}function kt(e,r){return function(n){for(var o=new Array(arguments.length),a=this,i=e==="error"?n:null,u=0;u<o.length;u++)o[u]=arguments[u];r(i,a,e,o)}}});var Ke=b((Sn,ue)=>{"use strict";s();ue.exports=At;ue.exports.isFinished=We;var Ye=ze(),xt=typeof setImmediate=="function"?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function At(e,r){return We(e)!==!1?(xt(r,null,e),e):(Ot(e,r),e)}function We(e){var r=e.socket;if(typeof e.finished=="boolean")return!!(e.finished||r&&!r.writable);if(typeof e.complete=="boolean")return!!(e.upgrade||!r||!r.readable||e.complete&&!e.readable)}function Ct(e,r){var t,n,o=!1;function a(u){t.cancel(),n.cancel(),o=!0,r(u)}t=n=Ye([[e,"end","finish"]],a);function i(u){e.removeListener("socket",i),!o&&t===n&&(n=Ye([[u,"error","close"]],a))}if(e.socket){i(e.socket);return}e.on("socket",i),e.socket===void 0&&Nt(e,i)}function Ot(e,r){var t=e.__onFinished;(!t||!t.queue)&&(t=e.__onFinished=Rt(e),Ct(e,t)),t.queue.push(r)}function Rt(e){function r(t){if(e.__onFinished===r&&(e.__onFinished=null),!!r.queue){var n=r.queue;r.queue=null;for(var o=0;o<n.length;o++)n[o](t,e)}}return r.queue=[],r}function Nt(e,r){var t=e.assignSocket;typeof t=="function"&&(e.assignSocket=function(o){t.call(this,o),r(o)})}});var Xe=b((kn,Ze)=>{"use strict";s();Ze.exports=Ut;function Lt(e,r){var t=!1;return function(o){var a=jt.apply(this,arguments);return t||(t=!0,r.call(this),typeof a[0]=="number"&&this.statusCode!==a[0]&&(a[0]=this.statusCode,a.length=1)),e.apply(this,a)}}function Ut(e,r){if(!e)throw new TypeError("argument res is required");if(typeof r!="function")throw new TypeError("argument listener must be a function");e.writeHead=Lt(e.writeHead,r)}function It(e,r){for(var t=0;t<r.length;t++)e.setHeader(r[t][0],r[t][1])}function Ft(e,r){for(var t=Object.keys(r),n=0;n<t.length;n++){var o=t[n];o&&e.setHeader(o,r[o])}}function jt(e){var r=arguments.length,t=r>1&&typeof arguments[1]=="string"?2:1,n=r>=t+1?arguments[t]:void 0;this.statusCode=e,Array.isArray(n)?It(this,n):n&&Ft(this,n);for(var o=new Array(Math.min(r,t)),a=0;a<o.length;a++)o[a]=arguments[a];return o}});var rr=b((An,D)=>{"use strict";s();D.exports=c;D.exports.compile=ce;D.exports.format=Vt;D.exports.token=Jt;var Pt=Oe(),fe=qe()("morgan"),W=Ge()("morgan"),Dt=Ke(),Bt=Xe(),qt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ht=1e3;function c(e,r){var t=e,n=r||{};e&&typeof e=="object"&&(n=e,t=n.format||"default",W("morgan(options): use morgan("+(typeof t=="string"?JSON.stringify(t):"format")+", options) instead")),t===void 0&&W("undefined format: specify a format");var o=n.immediate,a=n.skip||!1,i=typeof t!="function"?Gt(t):t,u=n.buffer,y=n.stream||process.stdout;if(u){W("buffer option");var m=typeof u!="number"?Ht:u;y=$t(y,m)}return function(g,p,x){g._startAt=void 0,g._startTime=void 0,g._remoteAddress=er(g),p._startAt=void 0,p._startTime=void 0,Qe.call(g);function q(){if(a!==!1&&a(g,p)){fe("skip request");return}var H=i(c,g,p);if(H==null){fe("skip line");return}fe("log request"),y.write(H+`
`)}o?q():(Bt(p,Qe),Dt(p,q)),x()}}c.format("combined",':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"');c.format("common",':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length]');c.format("default",':remote-addr - :remote-user [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"');W.property(c,"default","default format: use combined format");c.format("short",":remote-addr :remote-user :method :url HTTP/:http-version :status :res[content-length] - :response-time ms");c.format("tiny",":method :url :status :res[content-length] - :response-time ms");c.format("dev",function e(r,t,n){var o=le(n)?n.statusCode:void 0,a=o>=500?31:o>=400?33:o>=300?36:o>=200?32:0,i=e[a];return i||(i=e[a]=ce("\x1B[0m:method :url \x1B["+a+"m:status\x1B[0m :response-time ms - :res[content-length]\x1B[0m")),i(r,t,n)});c.token("url",function(r){return r.originalUrl||r.url});c.token("method",function(r){return r.method});c.token("response-time",function(r,t,n){if(!(!r._startAt||!t._startAt)){var o=(t._startAt[0]-r._startAt[0])*1e3+(t._startAt[1]-r._startAt[1])*1e-6;return o.toFixed(n===void 0?3:n)}});c.token("total-time",function(r,t,n){if(!(!r._startAt||!t._startAt)){var o=process.hrtime(r._startAt),a=o[0]*1e3+o[1]*1e-6;return a.toFixed(n===void 0?3:n)}});c.token("date",function(r,t,n){var o=new Date;switch(n||"web"){case"clf":return Mt(o);case"iso":return o.toISOString();case"web":return o.toUTCString()}});c.token("status",function(r,t){return le(t)?String(t.statusCode):void 0});c.token("referrer",function(r){return r.headers.referer||r.headers.referrer});c.token("remote-addr",er);c.token("remote-user",function(r){var t=Pt(r);return t?t.name:void 0});c.token("http-version",function(r){return r.httpVersionMajor+"."+r.httpVersionMinor});c.token("user-agent",function(r){return r.headers["user-agent"]});c.token("req",function(r,t,n){var o=r.headers[n.toLowerCase()];return Array.isArray(o)?o.join(", "):o});c.token("res",function(r,t,n){if(le(t)){var o=t.getHeader(n);return Array.isArray(o)?o.join(", "):o}});function Mt(e){var r=e.getUTCDate(),t=e.getUTCHours(),n=e.getUTCMinutes(),o=e.getUTCSeconds(),a=e.getUTCFullYear(),i=qt[e.getUTCMonth()];return Y(r)+"/"+i+"/"+a+":"+Y(t)+":"+Y(n)+":"+Y(o)+" +0000"}function ce(e){if(typeof e!="string")throw new TypeError("argument format must be a string");var r=String(JSON.stringify(e)),t=`  "use strict"
  return `+r.replace(/:([-\w]{2,})(?:\[([^\]]+)\])?/g,function(n,o,a){var i="req, res",u="tokens["+String(JSON.stringify(o))+"]";return a!==void 0&&(i+=", "+String(JSON.stringify(a))),`" +
    (`+u+"("+i+') || "-") + "'});return new Function("tokens, req, res",t)}function $t(e,r){var t=[],n=null;function o(){n=null,e.write(t.join("")),t.length=0}function a(i){n===null&&(n=setTimeout(o,r)),t.push(i)}return{write:a}}function Vt(e,r){return c[e]=r,this}function Gt(e){var r=c[e]||e||c.default;return typeof r!="function"?ce(r):r}function er(e){return e.ip||e._remoteAddress||e.connection&&e.connection.remoteAddress||void 0}function le(e){return typeof e.headersSent!="boolean"?!!e._header:e.headersSent}function Y(e){var r=String(e);return(r.length===1?"0":"")+r}function Qe(){this._startAt=process.hrtime(),this._startTime=new Date}function Jt(e,r){return c[e]=r,this}});s();var Ar=h(require("https"),1),ve=require("fs");s();var be=require("url"),M=require("path"),ee=h(require("dotenv"),1);ee.default.config();var{CLIENT_ID:we,CLIENT_SECRET:_e,SESSION_KEY_1:Ee,SESSION_KEY_2:Se}=process.env;ee.default.config({path:(0,M.join)((0,M.dirname)((0,be.fileURLToPath)(l)),"..",process.env.NODE_ENV==="production"?".env.production":".env.development")});var{NODE_ENV:Te,CLIENT_URL:R,CLIENT_PORT:N,SERVER_URL:$,SERVER_PORT:L}=process.env;s();var B=require("path"),_r=require("url"),Q=h(require("express"),1),Er=h(require("cors"),1),Sr=h(require("helmet"),1),Tr=h(rr(),1);s();var br=h(require("express"),1);s();var ir=h(require("express"),1),ur=h(require("multer"),1);s();var tr=h(require("sharp"),1),nr=require("path"),or=require("fs");s();var K=require("fs"),pe="upload/";(0,K.existsSync)(pe)||(0,K.mkdirSync)(pe);var S=pe;var ar=async(e,r)=>{let t=e?.file?.buffer;if(!t)return r.status(500).json({success:!1});let n=S+e?.file?.originalname;try{return await(0,tr.default)(t).jpeg({quality:80}).toFile(n),r.status(201).json({message:"image uploaded successfully"})}catch{return r.status(422).json({message:"image didn't upload"})}},sr=(e,r)=>{(0,or.readdir)(S,(t,n)=>{if(t)return r.status(500).json({message:"failed to retrieve image",error:t});let o=n.filter(a=>a.startsWith(e.params.filename));return o.length>0?r.sendFile((0,nr.resolve)(S+o[0])):r.status(404).json({success:!1,message:"image not found"})})};var zt=(0,ur.default)(),de=ir.default.Router();de.post("/",zt.single("image"),ar);de.get("/:filename",sr);var fr=de;s();var pr=h(require("express"),1),ge=h(require("multer"),1);s();var cr=h(require("fs"),1),lr=h(require("path"),1);function Yt(e,r){r.status(201).json({message:"file uploaded successfully"})}function Wt(e,r){cr.default.readdir(S,(t,n)=>{if(t)return r.status(500).json({message:"failed to retrieve file",error:t});let o=n.filter(a=>a.startsWith(e.params.filename));return o.length>0?r.sendFile(lr.default.resolve(S,o[0])):r.status(404).json({success:!1,message:"file not found"})})}var me={uploadFile:Yt,getFileByName:Wt};var he=pr.default.Router(),Kt=ge.default.diskStorage({destination:function(e,r,t){t(null,S)},filename:function(e,r,t){t(null,`${r.originalname}`)}}),Zt=(0,ge.default)({storage:Kt});he.post("/",Zt.single("file"),me.uploadFile);he.get("/:filename",me.getFileByName);var dr=he;s();var mr=h(require("express"),1),gr=require("url"),T=h(require("passport"),1),hr=require("passport-google-oauth20"),vr=h(require("cookie-session"),1);function Xt(e,r,t){t()}function Qt(e,r,t){if(!(e.isAuthenticated()&&e.user))return r.status(403).json({error:"forbidden"});t()}var Z={CLIENT_ID:we,CLIENT_SECRET:_e,SESSION_KEY_1:Ee,SESSION_KEY_2:Se},en={clientID:Z.CLIENT_ID,clientSecret:Z.CLIENT_SECRET,callbackURL:`https://${(0,gr.parse)($).hostname}:${L}/api/auth/google/callback`};function rn(e,r,t,n){n(null,t)}T.default.serializeUser((e,r)=>{let{sub:t,name:n,picture:o,email:a}=e._json;r(null,{sub:t,name:n,picture:o,email:a})});T.default.deserializeUser((e,r)=>{r(null,e)});T.default.use(new hr.Strategy(en,rn));var w=mr.default.Router();w.use((0,vr.default)({name:"session",maxAge:24*60*60*1e3,keys:[Z.SESSION_KEY_1,Z.SESSION_KEY_2]}));w.use((e,r,t)=>{e.session&&!e.session.regenerate&&(e.session.regenerate=n=>{n()}),e.session&&!e.session.save&&(e.session.save=n=>{n()}),t()});w.use(T.default.initialize());w.use(T.default.session());w.get("/google",T.default.authenticate("google",{scope:["profile","email"]}));w.get("/google/callback",T.default.authenticate("google",{successRedirect:`${R}:${N}/`,failureRedirect:"/api/auth/failure",session:!0}));w.get("/logout",(e,r)=>{e.logout(t=>r.redirect(`${R}:${N}/`))});w.get("/failure",(e,r)=>r.status(200).json({message:"failed to log in"}));w.get("/secret",Xt,Qt,(e,r)=>r.status(200).json({secret:42}));var yr=w;var X=br.default.Router();X.use("/auth",yr);X.use("/image",fr);X.use("/file",dr);var wr=X;var kr=(0,B.dirname)((0,_r.fileURLToPath)(l)),tn=`${R}:${N}`,k=(0,Q.default)();k.use((0,Er.default)({origin:tn}));k.use((0,Sr.default)({contentSecurityPolicy:{directives:{"default-src":["'self'"],"img-src":["'self'","blob:","*"]}}}));k.use(Q.default.json());Te==="development"&&k.use((0,Tr.default)("dev"));k.use(Q.default.static((0,B.join)(kr,"..","public")));k.use("/api",wr);k.get("/*",(e,r)=>{r.sendFile((0,B.join)(kr,"..","public","index.html"))});var xr=k;var nn=Ar.default.createServer({key:(0,ve.readFileSync)("key.pem"),cert:(0,ve.readFileSync)("cert.pem")},xr);(async function(){nn.listen(L,()=>{let r=`${$}:${L}`;console.log("\x1B[36m",r,"\x1B[0m")})})();
/*! Bundled license information:

basic-auth/index.js:
  (*!
   * basic-auth
   * Copyright(c) 2013 TJ Holowaychuk
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

depd/index.js:
  (*!
   * depd
   * Copyright(c) 2014-2018 Douglas Christopher Wilson
   * MIT Licensed
   *)

ee-first/index.js:
  (*!
   * ee-first
   * Copyright(c) 2014 Jonathan Ong
   * MIT Licensed
   *)

on-finished/index.js:
  (*!
   * on-finished
   * Copyright(c) 2013 Jonathan Ong
   * Copyright(c) 2014 Douglas Christopher Wilson
   * MIT Licensed
   *)

on-headers/index.js:
  (*!
   * on-headers
   * Copyright(c) 2014 Douglas Christopher Wilson
   * MIT Licensed
   *)

morgan/index.js:
  (*!
   * morgan
   * Copyright(c) 2010 Sencha Inc.
   * Copyright(c) 2011 TJ Holowaychuk
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
